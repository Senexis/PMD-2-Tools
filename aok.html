<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5473621501777747",
        enable_page_level_ads: true
        });
    </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110509796-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-110509796-2');
    </script>

    <title>SOS to A-OK Mail Converter - Pokemon Mystery Dungeon 2</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="60x60" href="/pmd-2-tools/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/pmd-2-tools/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/pmd-2-tools/favicon-16x16.png">
    <link rel="manifest" href="/pmd-2-tools/site.webmanifest">
    <link rel="mask-icon" href="/pmd-2-tools/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/pmd-2-tools/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/pmd-2-tools/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        html {
            position: relative;
            min-height: 100%;
        }

        body {
            margin-bottom: 120px;
        }

        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 60px;
            line-height: 60px;
            background-color: #f5f5f5;
            border-top: 1px solid #ced4da;
        }
    </style>
</head>

<body style="background-color: #ddd">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Pokemon Mystery Dungeon 2</a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="wondermail.html">Wonder Mail Generator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="wondermails.html">Wonder Mail S Generator</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="aok.html">SOS to A-OK Mail Converter <span class="sr-only">(current)</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 class="mt-5">SOS to A-OK Mail Converter</h1>
        <div class="alert alert-info" role="alert">
            While this tool has been tested, there is a possibility that a generated code doesn't work. If that happens, try again until it works.
        </div>

        <script src="items-en.js" type="text/javascript"></script>
        <script src="pokemon-en.js" type="text/javascript"></script>
        <script type="text/javascript">
            var PasswordTooShort = "The password was invalid because it contained fewer than 54 characters. Please re-enter the password as it appears in the game and try again."
            var NoPassword = "No password was entered."
            var InvalidPasswordLong = "The password was invalid.  Please re-enter the password and try again."
            var NotSOSMail = "The password given was not an SOS Mail password."
            var NotAOKMail = "The password given was not an A-OK Mail password."
            // var SOSMailEnteredInAOK="The password given appears to be an SOS Mail password instead of an A-OK Mail password.  Do you want to generate an A-OK Mail from this password? If you do, select OK."
            // var AOKMailEnteredInSOS="The password given appears to be an A-OK Mail password instead of an SOS Mail password.  Do you want to generate a Thank-You Mail from this password? If you do, select OK."
            var SOSMailEnteredInAOK = "The password given appears to be an SOS Mail password instead of an A-OK Mail password."
            var AOKMailEnteredInSOS = "The password given appears to be an A-OK Mail password instead of an SOS Mail password.  We will generate a Thank-You Mail instead."
            var BasementFloor = "BXXF"
            var AboveGroundFloor = "XXF"
            var InvalidPassword = "The password is invalid."
            var DifficultyLine = "Difficulty:"
            var IDLine = "ID:"
            var PlaceLine = "Place:"
            var ClientLine = "Client:"
            var RescueChancesLine = "Rescue chances:"
        </script>
        <script src="sosmail.js" type="text/javascript"></script>
        <script src="diff.js" type="text/javascript"></script>
        <script type="text/javascript">
            if (!String.prototype.trim) {
                String.prototype.trim = function () {
                    return this.replace(/^\s+|\s+$/g, '');
                }
            }

            var AboveGround = [
                0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0,
                1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0
            ]

            function IsAboveGround(d) {
                if (d >= AboveGround.length) return 1
                return AboveGround[d]
            }

            function showitems(name) {
                document.write("<select name=\"" + name + "\">");
                for (var i = 0; i < items.length; i++) {
                    document.write("<option value=\"\">" + items[i] + " [" + i.toString(16) + "]</option>");
                }
                document.write("</select>");
            }

            function showpokemon(name) {
                document.write("<select name=\"" + name + "\">");
                for (var i = 0; i < pokemon.length; i++) {
                    document.write("<option value=\"\">" + pokemon[i] + "</option>");
                }
                document.write("</select>");
            }

            var debug = 0

            function entrytopass(x) {
                x = x.replace(/[\n\s\r]/g, "").toUpperCase()
                return x
            }

            function formatpass(x) {
                x = entrytopass(x)
                return x.substr(0, 6) + " "
                    + x.substr(6, 6) + " "
                    + x.substr(12, 6) + "\r\n"
                    + x.substr(18, 6) + " "
                    + x.substr(24, 6) + " "
                    + x.substr(30, 6) + "\r\n"
                    + x.substr(36, 6) + " "
                    + x.substr(42, 6) + " "
                    + x.substr(48, 6) + "\r\n"
            }

            var baditems = "EDEEEFB1E924D8D2B0DC323334C2ECF0"

            function option(x) {
                return parseInt(x[x.selectedIndex].value)
            }

            function isbaditem(x) {
                if (x >= 0xF0) return 0
                for (var i = 0; i < baditems.length / 2; i++) {
                    if (x == c2c(baditems, i))
                        return 1
                }
                return 0
            }

            function showrewards(name) {
                document.write("<select name=\"" + name + "\">");
                for (var i = 0; i < items.length; i++) {
                    if (!isbaditem(i)) {
                        document.write("<option value=\"" + i + "\">" + items[i]
                            //      +" ["+i.toString(16)+"]"
                            + "</option>");
                    }
                }
                document.write("</select>");
            }

            function decodemission(pass) {
                var diffstring = "EDCBAS*"
                var client = pass[12] | (pass[13] << 8)
                var clientname = ""
                for (var i = 0; i < 10; i++) {
                    if (pass[20 + i] == 0) break
                    clientname += String.fromCharCode(pass[20 + i])
                }
                var clientstr = ClientLine + " " + clientname + " (" + pokemon[client] + ")"
                var placestr = PlaceLine + " " + dungeons[pass[4]] + " "
                if (IsAboveGround(pass[4]))
                    placestr += AboveGroundFloor.replace("XX", pass[5])
                else
                    placestr += BasementFloor.replace("XX", pass[5])
                var id = pass[16] | (pass[17] << 8)
                var idstr = IDLine + " " + (id % 10000) + "\r\n"
                    + RescueChancesLine + " " + pass[44] + "\r\n"
                    + DifficultyLine + " " + diffstring.charAt(GetDifficulty(0, pass[4], pass[5]))
                return clientstr + "\r\n" + placestr + "\r\n" + idstr + "\r\n"
            }

            function genmailex(f, mail, flags, mailtype) {
                var pass = []
                var x = entrytopass(mail)
                if (x.length == 0) {
                    alert(NoPassword)
                    return 0
                } if (x.length < 54) {
                    alert(PasswordTooShort)
                    return 0
                }
                if (!convertpass(x, pass)) {
                    alert(InvalidPasswordLong)
                    return 0
                } else if (pass[0] != mailtype) {
                    if (mailtype == 1) {
                        if (pass[0] == 4) {
                            if (confirm(AOKMailEnteredInSOS)) {
                                flags = 2;
                                f.aok.value = formatpass(x).trim();
                            } else {
                                return 0;
                            }
                        } else {
                            alert(NotSOSMail)
                            return 0
                        }
                    } else if (mailtype == 4) {
                        if (pass[0] == 1) {
                            if (confirm(SOSMailEnteredInAOK)) {
                                flags = 1;
                                f.sos.value = formatpass(x).trim();
                            } else {
                                return 0;
                            }
                        } else {
                            alert(NotAOKMail)
                            return 0
                        }
                    }
                }
                // f.mission.value=decodemission(pass)
                if (flags & 1) {
                    pass[0] = 4//A-OK mail ID
                    f.aok.value = formatpass(datatopass(pass)).trim()
                }
                if (flags & 2) {
                    //  var itemidx=option(f.item)
                    pass[0] = 5//Thank-You mail ID
                    //  if(itemidx){
                    //   pass[33]=1
                    //   pass[34]=itemidx&0xFF
                    //   pass[35]=(itemidx>>8)&0xFF
                    //  }
                    f.aok.value = formatpass(datatopass(pass)).trim()
                }
                return 1
            }

            function genaok(f) {
                if (genmailex(f, f.sos.value, 1, 1)) {
                    f.sos.value = formatpass(f.sos.value).trim()
                    ga('send', 'event', 'Tools', 'generate', 'PMD 2 - AOK');
                }
            }

            function genaokty(f) {
                if (genmailex(f, f.sos.value, 3, 1)) {
                    f.sos.value = formatpass(f.sos.value).trim()
                    ga('send', 'event', 'Tools', 'generate', 'PMD 2 - AOK & TY');
                }
            }

            function genty(f) {
                if (genmailex(f, f.aok.value, 2, 4)) {
                    f.aok.value = formatpass(f.aok.value).trim()
                    ga('send', 'event', 'Tools', 'generate', 'PMD 2 - TY');
                }
            }

            function decsos(f) {
                var x = entrytopass(f.sos.value)
                var pass = []
                if (!convertpass(x, pass)) {
                    alert(InvalidPassword)
                } else {
                    x = datatopass(pass)
                    f.sos.value = formatpass(x).trim()
                    if (debug) {
                        f.data.value = tostr(pass).trim()
                    }
                }
                ga('send', 'event', 'Tools', 'decrypt', 'PMD 2 - SOS');
            }

            function encsos(f) {
                var pass = f.data.value.split(",")
                for (var i = 0; i < pass.length; i++) {
                    pass[i] = parseInt(pass[i], 16)
                }
                x = datatopass(pass)
                f.sos.value = formatpass(x).trim()
                if (debug) {
                    f.data.value = tostr(pass).trim()
                }
                ga('send', 'event', 'Tools', 'encrypt', 'PMD 2 - SOS');
            }
        </script>

        <p>If none of your friends own Pokemon Mystery Dungeon 2, it is still possible to rescue yourself with the help of this tool. This tool converts SOS to A-OK Mail and A-OK Mail to Thank-You Mail.</p>

        <form name="s" action="javascript:void(null)">
            <div class="form-group">
                <label for="sos">SOS Mail Password</label>
                <textarea class="form-control" id="sos" name="sos" rows="2" cols="60"></textarea>
            </div>

            <script type="text/javascript">
                if (debug) {
                    document.write('<input type="button" value="Decode SOS Mail" onclick="decsos(this.form)"/><br/>');
                    document.write('<textarea name="data" rows="6" cols="60"></textarea><br/>');
                    document.write('<input type="button" value="Encode SOS Mail" onclick="encsos(this.form)"/><br/>')
                }
            </script>

            <div class="form-group">
                <input class="btn btn-info" type="button" value="Generate A-OK Mail" onclick="genaok(this.form)" />
            </div>

            <div class="form-group">
                <label for="aok">A-OK Mail Password</label>
                <textarea class="form-control" id="aok" name="aok" rows="2" cols="60" readonly="readonly"></textarea>
            </div>
        </form>
    </div>

    <footer class="footer">
        <div class="container">
            <span class="text-muted">&copy; 2010 - 2019 &mdash; <a href="https://web.archive.org/web/20080913124457/http://www.upokecenter.com/games/dungeon2/guides/sosmail.php">Original</a> written by <a href="http://web.archive.org/web/20070701084313/http://www.upokecenter.com:80/mail.php">Peter O.</a> of <a href="http://web.archive.org/web/20080913124315/http://www.upokecenter.com:80/">The Ultimate Pokemon Center</a>. Stored for archival reasons only.</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>

</html>